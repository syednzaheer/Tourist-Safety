<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Detection | Tourist Safety System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Premium Styles -->
  <link href="css/style.css" rel="stylesheet">
</head>

<body>

  <!-- Navbar -->
  <nav class="navbar navbar-glass fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">‚¨Ö Back to Home</a>
    </div>
  </nav>

  <!-- Main AI Card -->
  <div class="form-card text-center" style="margin-top: 120px;"> <!-- Reusing form-card for consistent center look -->
    <h2 class="mb-3">ü§ñ AI Anomaly Detection</h2>
    <p class="text-muted mb-4">Enter a movement delta (1‚Äì5 km) to check if behavior is normal.</p>

    <div class="mb-4">
      <input type="number" id="inputValue" class="form-control" placeholder="Enter deviation value (e.g., 3)"
        style="max-width: 300px; margin: 0 auto; text-align: center; font-size: 1.2rem;">
    </div>

    <button onclick="detectSafety()" class="btn btn-lg w-100"
      style="background: var(--emerald-500); color: white; max-width: 300px;">Check Status</button>

    <div id="result" class="mt-4 fw-bold" style="font-size: 1.2rem; min-height: 30px;"></div>

    <hr class="my-4" style="opacity: 0.1">

    <div class="text-start bg-light p-3 rounded-3" style="font-size: 0.9rem;">
      <p class="mb-1"><strong>‚ÑπÔ∏è How it works:</strong></p>
      <p class="mb-0 text-muted">
        The system analyzes tourist movement patterns. Unexpected large deviations (Anomalies) trigger proactive safety
        checks by the AI Agent.
      </p>
    </div>
  </div>

  <script src="js/app.js"></script>
  <script>
    function detectSafety() {
      const value = parseFloat(document.getElementById("inputValue").value);
      const resultDiv = document.getElementById("result");

      if (isNaN(value)) {
        resultDiv.innerHTML = "<span class='text-warning'>‚ö†Ô∏è Please enter a valid number.</span>";
        if (window.toaster) window.toaster.show("Invalid Input", "warning");
        return;
      }

      if (value >= 1 && value <= 5) {
        resultDiv.innerHTML = "<span style='color: var(--emerald-600)'>üü¢ Normal ‚Äî Behavior within safe range.</span>";
        if (window.toaster) window.toaster.show("Status: Normal", "success");
      } else {
        resultDiv.innerHTML = "<span style='color: #ef4444'>üî¥ Anomaly Detected ‚Äî High deviation!</span>";
        if (window.toaster) window.toaster.show("Anomaly Detected!", "error");

        // Log to system
        const alerts = JSON.parse(localStorage.getItem('alerts') || '[]');
        alerts.unshift({ type: 'anomaly', time: new Date().toISOString(), note: `High Deviation: ${value}km` });
        localStorage.setItem('alerts', JSON.stringify(alerts));
      }
    }
  </script>

</body>

</html>